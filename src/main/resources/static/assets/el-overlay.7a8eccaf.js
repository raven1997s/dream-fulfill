import{y as se,z as fe,A as me,B as U,C as ve,D as pe,F as x,G as ye,H as ne,I as G,J as W,K as ge,L as be,M as Ce,N as he,O as Ee,P as H,Q as J,R as Z,S as j,d as Y,j as z,T as X,U as h,V as ke,W as we,X as Ie,Y as Q,Z as Me,$ as D,o as O,c as _,a as V,a0 as k,u as o,t as Te,w as L,n as K,a1 as Le,a2 as Se,a3 as q,a4 as ae,a5 as le,a6 as De,a7 as Be,a8 as re,a9 as Ae,aa as $e,ab as ee,r as S,ac as Fe,ad as Oe,ae as Pe,af as Re,ag as oe,ah as Ne,ai as te,aj as ze,m as Ye,ak as Ve,al as He,am as Xe,an as _e,ao as Ue,ap as We,aq as je}from"./index.ed1f32ce.js";const Ke=(e,t,l)=>{let r={offsetX:0,offsetY:0};const u=s=>{const c=s.clientX,m=s.clientY,{offsetX:f,offsetY:g}=r,v=e.value.getBoundingClientRect(),d=v.left,C=v.top,B=v.width,P=v.height,R=document.documentElement.clientWidth,A=document.documentElement.clientHeight,N=-d+f,$=-C+g,w=R-d-B+f,I=A-C-P+g,F=E=>{const a=Math.min(Math.max(f+E.clientX-c,N),w),b=Math.min(Math.max(g+E.clientY-m,$),I);r={offsetX:a,offsetY:b},e.value.style.transform=`translate(${U(a)}, ${U(b)})`},p=()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",F),document.addEventListener("mouseup",p)},i=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",u)},n=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",u)};se(()=>{fe(()=>{l.value?i():n()})}),me(()=>{n()})},qe=(e,t={})=>{ve(e)||pe("[useLockscreen]","You need to pass a ref param to this function");const l=t.ns||x("popup"),r=ye(()=>l.bm("parent","hidden"));if(!ne||G(document.body,r.value))return;let u=0,i=!1,n="0";const s=()=>{setTimeout(()=>{Ee(document==null?void 0:document.body,r.value),i&&document&&(document.body.style.width=n)},200)};W(e,c=>{if(!c){s();return}i=!G(document.body,r.value),i&&(n=document.body.style.width),u=ge(l.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,f=be(document.body,"overflowY");u>0&&(m||f==="scroll")&&i&&(document.body.style.width=`calc(100% - ${u}px)`),Ce(document.body,r.value)}),he(()=>s())},ie=e=>{if(!e)return{onClick:H,onMousedown:H,onMouseup:H};let t=!1,l=!1;return{onClick:n=>{t&&l&&e(n),t=l=!1},onMousedown:n=>{t=n.target===n.currentTarget},onMouseup:n=>{l=n.target===n.currentTarget}}},xe=100,Ze=600,bo={beforeMount(e,t){const l=t.value,{interval:r=xe,delay:u=Ze}=J(l)?{}:l;let i,n;const s=()=>J(l)?l():l.handler(),c=()=>{n&&(clearTimeout(n),n=void 0),i&&(clearInterval(i),i=void 0)};e.addEventListener("mousedown",m=>{m.button===0&&(c(),s(),document.addEventListener("mouseup",()=>c(),{once:!0}),n=setTimeout(()=>{i=setInterval(()=>{s()},r)},u))})}},Ge=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:j([String,Array,Object])},zIndex:{type:j([String,Number])}}),Je={click:e=>e instanceof MouseEvent},Qe="overlay";var eo=Y({name:"ElOverlay",props:Ge,emits:Je,setup(e,{slots:t,emit:l}){const r=x(Qe),u=c=>{l("click",c)},{onClick:i,onMousedown:n,onMouseup:s}=ie(e.customMaskEvent?void 0:u);return()=>e.mask?z("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:i,onMousedown:n,onMouseup:s},[h(t,"default")],X.STYLE|X.CLASS|X.PROPS,["onClick","onMouseup","onMousedown"]):ke("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(t,"default")])}});const oo=eo,ce=Symbol("dialogInjectionKey"),ue=Z({center:Boolean,alignCenter:Boolean,closeIcon:{type:we},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),to={close:()=>!0},so=["aria-level"],no=["aria-label"],ao=["id"],lo=Y({name:"ElDialogContent"}),ro=Y({...lo,props:ue,emits:to,setup(e){const t=e,{t:l}=Ie(),{Close:r}=De,{dialogRef:u,headerRef:i,bodyId:n,ns:s,style:c}=Q(ce),{focusTrapRef:m}=Q(Me),f=D(()=>[s.b(),s.is("fullscreen",t.fullscreen),s.is("draggable",t.draggable),s.is("align-center",t.alignCenter),{[s.m("center")]:t.center},t.customClass]),g=Be(m,u),v=D(()=>t.draggable);return Ke(u,i,v),(d,C)=>(O(),_("div",{ref:o(g),class:k(o(f)),style:ae(o(c)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:i,class:k(o(s).e("header"))},[h(d.$slots,"header",{},()=>[V("span",{role:"heading","aria-level":d.ariaLevel,class:k(o(s).e("title"))},Te(d.title),11,so)]),d.showClose?(O(),_("button",{key:0,"aria-label":o(l)("el.dialog.close"),class:k(o(s).e("headerbtn")),type:"button",onClick:C[0]||(C[0]=B=>d.$emit("close"))},[z(o(Se),{class:k(o(s).e("close"))},{default:L(()=>[(O(),K(Le(d.closeIcon||o(r))))]),_:1},8,["class"])],10,no)):q("v-if",!0)],2),V("div",{id:o(n),class:k(o(s).e("body"))},[h(d.$slots,"default")],10,ao),d.$slots.footer?(O(),_("footer",{key:0,class:k(o(s).e("footer"))},[h(d.$slots,"footer")],2)):q("v-if",!0)],6))}});var io=le(ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const co=Z({...ue,appendToBody:Boolean,beforeClose:{type:j(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),uo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[re]:e=>Ae(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},fo=(e,t)=>{const r=Pe().emit,{nextZIndex:u}=$e();let i="";const n=ee(),s=ee(),c=S(!1),m=S(!1),f=S(!1),g=S(e.zIndex||u());let v,d;const C=Fe("namespace",Re),B=D(()=>{const y={},T=`--${C.value}-dialog`;return e.fullscreen||(e.top&&(y[`${T}-margin-top`]=e.top),e.width&&(y[`${T}-width`]=U(e.width))),y}),P=D(()=>e.alignCenter?{display:"flex"}:{});function R(){r("opened")}function A(){r("closed"),r(re,!1),e.destroyOnClose&&(f.value=!1)}function N(){r("close")}function $(){d==null||d(),v==null||v(),e.openDelay&&e.openDelay>0?{stop:v}=oe(()=>p(),e.openDelay):p()}function w(){v==null||v(),d==null||d(),e.closeDelay&&e.closeDelay>0?{stop:d}=oe(()=>E(),e.closeDelay):E()}function I(){function y(T){T||(m.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(y):w()}function F(){e.closeOnClickModal&&I()}function p(){!ne||(c.value=!0)}function E(){c.value=!1}function a(){r("openAutoFocus")}function b(){r("closeAutoFocus")}function M(y){var T;((T=y.detail)==null?void 0:T.focusReason)==="pointer"&&y.preventDefault()}e.lockScroll&&qe(c);function de(){e.closeOnPressEscape&&I()}return W(()=>e.modelValue,y=>{y?(m.value=!1,$(),f.value=!0,g.value=e.zIndex?g.value++:u(),Oe(()=>{r("open"),t.value&&(t.value.scrollTop=0)})):c.value&&w()}),W(()=>e.fullscreen,y=>{!t.value||(y?(i=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=i)}),se(()=>{e.modelValue&&(c.value=!0,f.value=!0,$())}),{afterEnter:R,afterLeave:A,beforeLeave:N,handleClose:I,onModalClick:F,close:w,doClose:E,onOpenAutoFocus:a,onCloseAutoFocus:b,onCloseRequested:de,onFocusoutPrevented:M,titleId:n,bodyId:s,closed:m,style:B,overlayDialogStyle:P,rendered:f,visible:c,zIndex:g}},mo=["aria-label","aria-labelledby","aria-describedby"],vo=Y({name:"ElDialog",inheritAttrs:!1}),po=Y({...vo,props:co,emits:uo,setup(e,{expose:t}){const l=e,r=Ne();te({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},D(()=>!!r.title)),te({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},D(()=>!!l.customClass));const u=x("dialog"),i=S(),n=S(),s=S(),{visible:c,titleId:m,bodyId:f,style:g,overlayDialogStyle:v,rendered:d,zIndex:C,afterEnter:B,afterLeave:P,beforeLeave:R,handleClose:A,onModalClick:N,onOpenAutoFocus:$,onCloseAutoFocus:w,onCloseRequested:I,onFocusoutPrevented:F}=fo(l,i);ze(ce,{dialogRef:i,headerRef:n,bodyId:f,ns:u,rendered:d,style:g});const p=ie(N),E=D(()=>l.draggable&&!l.fullscreen);return t({visible:c,dialogContentRef:s}),(a,b)=>(O(),K(We,{to:"body",disabled:!a.appendToBody},[z(Ue,{name:"dialog-fade",onAfterEnter:o(B),onAfterLeave:o(P),onBeforeLeave:o(R),persisted:""},{default:L(()=>[Ye(z(o(oo),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":o(C)},{default:L(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:o(m),"aria-describedby":o(f),class:k(`${o(u).namespace.value}-overlay-dialog`),style:ae(o(v)),onClick:b[0]||(b[0]=(...M)=>o(p).onClick&&o(p).onClick(...M)),onMousedown:b[1]||(b[1]=(...M)=>o(p).onMousedown&&o(p).onMousedown(...M)),onMouseup:b[2]||(b[2]=(...M)=>o(p).onMouseup&&o(p).onMouseup(...M))},[z(o(Ve),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o($),onFocusAfterReleased:o(w),onFocusoutPrevented:o(F),onReleaseRequested:o(I)},{default:L(()=>[o(d)?(O(),K(io,He({key:0,ref_key:"dialogContentRef",ref:s},a.$attrs,{"custom-class":a.customClass,center:a.center,"align-center":a.alignCenter,"close-icon":a.closeIcon,draggable:o(E),fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,"aria-level":a.headerAriaLevel,onClose:o(A)}),Xe({header:L(()=>[a.$slots.title?h(a.$slots,"title",{key:1}):h(a.$slots,"header",{key:0,close:o(A),titleId:o(m),titleClass:o(u).e("title")})]),default:L(()=>[h(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:L(()=>[h(a.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):q("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,mo)]),_:3},8,["mask","overlay-class","z-index"]),[[_e,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var yo=le(po,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Co=je(yo);export{Co as E,oo as a,qe as b,ie as c,Ke as u,bo as v};
